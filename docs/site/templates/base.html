<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>
            {% block title %}
                {{ config.title }}
            {% endblock title %}
        </title>
        <meta name="description" content="{{ config.description }}">
        <link rel="canonical"
              href="{% block canonical %}{{ config.base_url }}{% endblock canonical %}">
        <link rel="icon" href="{{ config.base_url }}/favicon.ico">
        <link rel="stylesheet" href="{{ get_url(path='site.css') }}">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap"
              rel="stylesheet">
        {% block extra_css %}
        {% endblock extra_css %}
        <!-- Apply saved theme before paint to avoid flash of unstyled content -->
        <script>
            (function () {
                var t = localStorage.getItem('agentty-theme') || 'hacker';
                if (t === 'dark') document.documentElement.classList.add('theme-dark');
            })();
        </script>
    </head>
    <body class="site-body">
        {% set docs_section = get_section(path="docs/_index.md") %}
        <nav class="site-nav">
            <div class="site-nav-inner {% block page_width_class %}site-container{% endblock page_width_class %}">
                <a class="site-brand" href="{{ config.base_url }}">&gt; agentty</a>
                <div class="site-nav-links">
                    {% block nav_links %}
                        <a class="site-nav-link" href="{{ config.base_url }}/">home</a>
                        <a class="site-nav-link" href="{{ docs_section.permalink }}">docs</a>
                    {% endblock nav_links %}
                    <div class="site-theme-switch" aria-label="Color theme">
                        <button class="theme-btn site-theme-btn"
                                data-theme="hacker"
                                aria-pressed="true">hacker</button>
                        <span class="site-theme-separator">/</span>
                        <button class="theme-btn site-theme-btn"
                                data-theme="dark"
                                aria-pressed="false">dark</button>
                    </div>
                    {% block extra_nav %}
                    {% endblock extra_nav %}
                </div>
            </div>
        </nav>
        <main class="site-main site-container {% block main_width_class %}site-container{% endblock main_width_class %} {% block main_extra_classes %}{% endblock main_extra_classes %}">
            {% block content %}
            {% endblock content %}
        </main>
        <script>
    (function () {
      var STORAGE_KEY = 'agentty-theme';
      var root = document.documentElement;
      var themeBtns = document.querySelectorAll('.theme-btn');

      /** Apply a theme by name ('hacker' or 'dark'), update button states, and persist. */
      function applyTheme(theme) {
        root.classList.toggle('theme-dark', theme === 'dark');
        themeBtns.forEach(function (btn) {
          var active = btn.dataset.theme === theme;
          btn.classList.toggle('text-accent', active);
          btn.classList.toggle('text-muted', !active);
          btn.setAttribute('aria-pressed', String(active));
        });
        localStorage.setItem(STORAGE_KEY, theme);
      }

      // Sync button states with the theme already applied by the <head> script.
      applyTheme(localStorage.getItem(STORAGE_KEY) || 'hacker');

      themeBtns.forEach(function (btn) {
        btn.addEventListener('click', function () { applyTheme(btn.dataset.theme); });
      });
    })();
        </script>
        {% block extra_scripts %}
        {% endblock extra_scripts %}
    </body>
</html>
