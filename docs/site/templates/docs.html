{% extends "base.html" %}
{% macro render_section_listing(section_path, show_heading=false) %}
    {% set docs_listing_section = get_section(path=section_path) %}
    {% if show_heading %}
        <h2 class="docs-section-title">{{ docs_listing_section.title }}</h2>
    {% endif %}
    {% if docs_listing_section.pages | length > 0 %}
        <section class="docs-cards">
            {% for docs_page in docs_listing_section.pages %}
                <article class="docs-card">
                    <h3 class="docs-card-title">
                        <a class="docs-card-link"
                           href="{{ docs_page.permalink }}">{{ docs_page.title }}</a>
                    </h3>
                    {% if docs_page.summary %}
                        <p class="docs-card-description">{{ docs_page.summary | safe }}</p>
                    {% elif docs_page.description %}
                        <p class="docs-card-description">{{ docs_page.description }}</p>
                    {% endif %}
                </article>
            {% endfor %}
        </section>
    {% endif %}
    {% for subsection_path in docs_listing_section.subsections %}
        {{ self::render_section_listing(section_path=subsection_path, show_heading=true) }}
    {% endfor %}
{% endmacro render_section_listing %}
{% block title %}
    {{ section.title }} | {{ config.title }}
{% endblock title %}
{% block canonical %}
    {{ section.permalink }}
{% endblock canonical %}
{% block page_width_class %}
    site-container-wide
{% endblock page_width_class %}
{% block main_width_class %}
    site-container-wide
{% endblock main_width_class %}
{% block content %}
    <header class="docs-section-header">
        <h1 class="docs-page-title">{{ section.title }}</h1>
        <p class="docs-section-intro">{{ section.content | safe }}</p>
    </header>
    {{ self::render_section_listing(section_path="docs/_index.md") }}
{% endblock content %}
